{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Tabs}from'antd';import Loader from'../component/Loader';import Error from'../component/Error';import Swal from'sweetalert2';import axios from'axios';import{Divider,Space,Tag}from'antd';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const{TabPane}=Tabs;function Profilescreen(){const user=JSON.parse(localStorage.getItem(\"currentUser\"));useEffect(()=>{if(!user){window.location.href=\"/login\";}},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"ml-3,mt-3\",children:/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"1\",children:[/*#__PURE__*/_jsxs(TabPane,{tab:\"Profile\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Profile\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Name:\",user.name]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Email:\",user.email]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"isAdmin:\",user.isAdmin?'Yes':'No']})]},\"1\"),/*#__PURE__*/_jsx(TabPane,{tab:\"Bookings\",children:/*#__PURE__*/_jsx(MyBookings,{})},\"2\")]})});}export default Profilescreen;export function MyBookings(){const[loading,setLoading]=useState(false);const[error,setError]=useState();const[bookings,setbookings]=useState([]);const user=JSON.parse(localStorage.getItem(\"currentUser\"));useEffect(()=>{const fetchData=async()=>{try{setLoading(true);const data=await(await axios.post('api/bookings/getbookingsbyuserid',{userid:user._id})).data;setbookings(data);setLoading(false);// Handle the data here, set it to state or perform further operations\n}catch(error){console.log(error);setLoading(false);setError(true);}};fetchData();},[user]);async function cancelBooking(bookingid,vehicleid){try{setLoading(true);const result=await axios.post(\"/api/bookings/cancelbooking\",{bookingid,vehicleid}).data;setLoading(false);Swal.fire(\"Dear user,your booking has been cancelled . \").then(result=>{window.location.reload();});console.log(result);}catch(error){console.log(error);setLoading(false);Swal.fire('something went wrong');}}return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"colmd-6\",children:[loading&&/*#__PURE__*/_jsx(Loader,{}),bookings&&bookings.map(booking=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"bs\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" Rented Vehicle:\",booking.vehicle,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Rented ID:\",booking._id]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\" Rented In Date:\",booking.fromdate]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\" Rented Expiration Date:\",booking.todate]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Estimated Rented Days:\",booking.totaldays]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Amount:\",booking.totalamount]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\" Status:\"}),\":\",'',booking.status=='canceled'?/*#__PURE__*/_jsx(Tag,{color:\"orange\",children:\"Cancelled\"}):/*#__PURE__*/_jsx(Tag,{bordered:false,color:\"green\",children:\"Confirmed\"})]}),booking.status!=='canceled'&&/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>{cancelBooking(booking._id,booking.vehicleid);},children:\"Cancel Booking\"})})]});})]})});}","map":{"version":3,"names":["React","useEffect","useState","Tabs","Loader","Error","Swal","axios","Divider","Space","Tag","jsx","_jsx","jsxs","_jsxs","TabPane","Profilescreen","user","JSON","parse","localStorage","getItem","window","location","href","className","children","defaultActiveKey","tab","name","email","isAdmin","MyBookings","loading","setLoading","error","setError","bookings","setbookings","fetchData","data","post","userid","_id","console","log","cancelBooking","bookingid","vehicleid","result","fire","then","reload","map","booking","vehicle","fromdate","todate","totaldays","totalamount","status","color","bordered","onClick"],"sources":["/Users/suvashneupane/frontendd/my-react-app/src/display/Profilescreen.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Tabs } from 'antd';\nimport Loader from '../component/Loader';\nimport Error from '../component/Error';\nimport Swal from 'sweetalert2';\nimport axios from 'axios';\nimport { Divider, Space, Tag } from 'antd';\n\nconst { TabPane } = Tabs;\n\nfunction Profilescreen() {\n\n\n    const user = JSON.parse(localStorage.getItem(\"currentUser\"))\n\n\n    useEffect(() => {\n\n        if (!user) {\n            window.location.href = \"/login\"\n        }\n\n    }, [])\n    return (\n        <div className='ml-3,mt-3'>\n            <Tabs defaultActiveKey='1'>\n                <TabPane tab=\"Profile\" key=\"1\">\n                    <h1>My Profile</h1>\n                    <br />\n                    <h1>Name:{user.name}</h1>\n                    <h1>Email:{user.email}</h1>\n                    <h1>isAdmin:{user.isAdmin ? 'Yes' : 'No'}</h1>\n\n\n\n\n                </TabPane>\n                <TabPane tab=\"Bookings\" key=\"2\">\n                    <MyBookings />\n                </TabPane>\n\n            </Tabs>\n        </div>\n    );\n}\n\nexport default Profilescreen;\n\n\n\nexport function MyBookings() {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState();\n\n    const [bookings, setbookings] = useState([])\n    const user = JSON.parse(localStorage.getItem(\"currentUser\"));\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                setLoading(true)\n                const data = await (await axios.post('api/bookings/getbookingsbyuserid', { userid: user._id })).data\n                setbookings(data)\n                setLoading(false)\n\n\n\n                // Handle the data here, set it to state or perform further operations\n            } catch (error) {\n\n\n                console.log(error);\n                setLoading(false)\n                setError(true)\n            }\n        };\n\n        fetchData();\n    }, [user]);\n\n    async function cancelBooking(bookingid, vehicleid) {\n        try {\n            setLoading(true)\n            const result = await axios.post(\"/api/bookings/cancelbooking\", { bookingid, vehicleid }).data\n            setLoading(false)\n            Swal.fire(\"Dear user,your booking has been cancelled . \").then(result => {\n\n                window.location.reload()\n\n\n            })\n            console.log(result);\n\n        } catch (error) {\n            console.log(error);\n            setLoading(false);\n            Swal.fire('something went wrong')\n        }\n\n    }\n\n\n\n\n    return (\n        <div className='row'>\n            <div className=\"colmd-6\">\n\n                {loading && (<Loader />)}\n                {bookings && (bookings.map(booking => {\n\n                    return (<div className='bs'>\n\n\n                        <h1> Rented Vehicle:{booking.vehicle} </h1>\n                        <p>Rented ID:{booking._id}</p>\n                        <h1> Rented In Date:{booking.fromdate}</h1>\n                        <h1> Rented Expiration Date:{booking.todate}</h1>\n                        <h1>Estimated Rented Days:{booking.totaldays}</h1>\n                        <h1>Amount:{booking.totalamount}</h1>\n                        <p>\n                            <b> Status:\n\n\n                            </b>:{''}\n\n                            {booking.status == 'canceled' ? (<Tag color=\"orange\">Cancelled</Tag>) : (<Tag bordered={false} color=\"green\">\n                                Confirmed\n                            </Tag>)}\n                        </p>\n                        {booking.status !== 'canceled' &&\n\n                            <div className='text-right'>\n                                <button className=\"btn btn-primary\" onClick={() => {\n                                    cancelBooking(booking._id, booking.vehicleid)\n                                }}>\n                                    Cancel Booking\n                                </button>\n                            </div>\n\n\n\n                        }\n\n\n\n\n                    </div>\n                    )\n\n\n\n\n\n\n                }))}\n\n\n\n            </div>\n        </div >\n    )\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}